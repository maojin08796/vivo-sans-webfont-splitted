{"version":3,"file":"parser.mjs","sources":["../src/parser.ts"],"sourcesContent":["import fs from 'fs-extra';\ntype CommonParser<T> = (value: string, previous: T) => T;\nexport const toInt: CommonParser<number> = (value, dummyPrevious) => {\n    // parseInt 参数为字符串和进制数\n    const parsedValue = parseInt(value, 10);\n    if (isNaN(parsedValue)) {\n        throw new Error(dummyPrevious + 'Not a number.');\n    }\n    return parsedValue;\n};\nexport const toFloat: CommonParser<number> = (value, dummyPrevious) => {\n    // parseInt 参数为字符串和进制数\n    const parsedValue = parseFloat(value);\n    if (isNaN(parsedValue)) {\n        throw new Error(dummyPrevious + 'Not a number.');\n    }\n    return parsedValue;\n};\nexport const toFile: CommonParser<Uint8Array> = (value, dummyPrevious) => {\n    return new Uint8Array(fs.readFileSync(value).buffer);\n};\nexport const toBoolean: CommonParser<boolean> = (value, dummyPrevious) => {\n    if (typeof value === 'string') {\n        if (value.toLocaleLowerCase() === 'true') {\n            return true;\n        }\n        if (value.toLocaleLowerCase() === 'false') {\n            return false;\n        }\n        return true;\n    }\n    return value;\n};\n\nexport const HandleRepeated =\n    <T>(fn: CommonParser<T>): CommonParser<T[]> =>\n    (value, dummyPrevious) => {\n        return value\n            .split(',')\n            .map((v) => v.trim())\n            .map((i) => fn(i, dummyPrevious[0]));\n    };\n"],"names":[],"mappings":";;AAEa,MAAA,KAAA,GAA8B,CAAC,KAAA,EAAO,aAAkB,KAAA;AAEjE,EAAM,MAAA,WAAA,GAAc,QAAS,CAAA,KAAA,EAAO,EAAE,CAAA;AACtC,EAAI,IAAA,KAAA,CAAM,WAAW,CAAG,EAAA;AACpB,IAAM,MAAA,IAAI,KAAM,CAAA,aAAA,GAAgB,eAAe,CAAA;AAAA;AAEnD,EAAO,OAAA,WAAA;AACX;AACa,MAAA,OAAA,GAAgC,CAAC,KAAA,EAAO,aAAkB,KAAA;AAEnE,EAAM,MAAA,WAAA,GAAc,WAAW,KAAK,CAAA;AACpC,EAAI,IAAA,KAAA,CAAM,WAAW,CAAG,EAAA;AACpB,IAAM,MAAA,IAAI,KAAM,CAAA,aAAA,GAAgB,eAAe,CAAA;AAAA;AAEnD,EAAO,OAAA,WAAA;AACX;AACa,MAAA,MAAA,GAAmC,CAAC,KAAA,EAAO,aAAkB,KAAA;AACtE,EAAA,OAAO,IAAI,UAAW,CAAA,EAAA,CAAG,YAAa,CAAA,KAAK,EAAE,MAAM,CAAA;AACvD;AACa,MAAA,SAAA,GAAmC,CAAC,KAAA,EAAO,aAAkB,KAAA;AACtE,EAAI,IAAA,OAAO,UAAU,QAAU,EAAA;AAC3B,IAAI,IAAA,KAAA,CAAM,iBAAkB,EAAA,KAAM,MAAQ,EAAA;AACtC,MAAO,OAAA,IAAA;AAAA;AAEX,IAAI,IAAA,KAAA,CAAM,iBAAkB,EAAA,KAAM,OAAS,EAAA;AACvC,MAAO,OAAA,KAAA;AAAA;AAEX,IAAO,OAAA,IAAA;AAAA;AAEX,EAAO,OAAA,KAAA;AACX;AAEO,MAAM,cACT,GAAA,CAAI,EACJ,KAAA,CAAC,OAAO,aAAkB,KAAA;AACtB,EAAA,OAAO,MACF,KAAM,CAAA,GAAG,EACT,GAAI,CAAA,CAAC,MAAM,CAAE,CAAA,IAAA,EAAM,CACnB,CAAA,GAAA,CAAI,CAAC,CAAM,KAAA,EAAA,CAAG,GAAG,aAAc,CAAA,CAAC,CAAC,CAAC,CAAA;AAC3C;;;;"}