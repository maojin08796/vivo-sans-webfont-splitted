{"version":3,"file":"cli.mjs","sources":["../src/cli.ts"],"sourcesContent":["#!/usr/bin/env node\nimport { Command } from 'commander';\nimport { genCommanderCode } from './adapter/genCommanderCode.js';\nimport { outputFile } from 'fs-extra';\nimport { genClapCode } from './adapter/genClapCode.js';\nconst program = new Command();\nprogram\n    .requiredOption('-i, --input <path>', 'proto file path')\n    .requiredOption('-t --target <target_name>', 'target to gen', 'commander')\n    .requiredOption('-m, --message_name <name>', 'message name in proto')\n    .requiredOption('-o, --output <path>', 'path to gen file');\nconst data = program.parse(process.argv).opts();\n// console.log(data);\n\nexport type Adapter = (filePath: string, messageName: string) => string;\nconst adapters: Record<string, Adapter> = {\n    commander: genCommanderCode,\n    clap: genClapCode,\n};\nif (!adapters[data.target])\n    throw new Error(`${data.target} target not support`);\nconst file = adapters[data.target](data.input, data.message_name);\noutputFile(data.output, file);\n"],"names":[],"mappings":";;;;;;AAKA,MAAM,OAAA,GAAU,IAAI,OAAQ,EAAA;AAC5B,OAAA,CACK,cAAe,CAAA,oBAAA,EAAsB,iBAAiB,CAAA,CACtD,eAAe,2BAA6B,EAAA,eAAA,EAAiB,WAAW,CAAA,CACxE,eAAe,2BAA6B,EAAA,uBAAuB,CACnE,CAAA,cAAA,CAAe,uBAAuB,kBAAkB,CAAA;AAC7D,MAAM,OAAO,OAAQ,CAAA,KAAA,CAAM,OAAQ,CAAA,IAAI,EAAE,IAAK,EAAA;AAI9C,MAAM,QAAoC,GAAA;AAAA,EACtC,SAAW,EAAA,gBAAA;AAAA,EACX,IAAM,EAAA;AACV,CAAA;AACA,IAAI,CAAC,QAAS,CAAA,IAAA,CAAK,MAAM,CAAA;AACrB,EAAA,MAAM,IAAI,KAAA,CAAM,CAAG,EAAA,IAAA,CAAK,MAAM,CAAqB,mBAAA,CAAA,CAAA;AACvD,MAAM,IAAA,GAAO,SAAS,IAAK,CAAA,MAAM,EAAE,IAAK,CAAA,KAAA,EAAO,KAAK,YAAY,CAAA;AAChE,UAAW,CAAA,IAAA,CAAK,QAAQ,IAAI,CAAA"}