"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("node:crypto"),e=require("koffi"),l=require("../../../../../../@xan105_is@2.10.1/node_modules/@xan105/is/lib/is/type/obj.js"),c=require("../../../../../../@xan105_is@2.10.1/node_modules/@xan105/is/lib/assert/type/obj.js");require("../../../../../../@xan105_is@2.10.1/node_modules/@xan105/is/lib/is/file/binary.js");const a=require("../../../../../../@xan105_is@2.10.1/node_modules/@xan105/is/lib/opt/array.js");require("./util/win32.js");const h=require("./util/abi.js");class b{#e=null;#r=null;constructor(r,t=null){c.shouldObj(r);const s=a.asArray(r.parameters)??[],i=r.result||"void",o=h.conventions.includes(r.abi)?r.abi:"cdecl",u=e.proto("__"+o,n.randomUUID(),i,s);this.#e=e.pointer(u),l.isFunction(t)&&this.register(t)}register(r=()=>{}){this.#e&&this.#r&&this.close(),this.#r=e.register(r,this.#e)}get type(){return this.#e}get pointer(){return this.#r}get address(){return this.#r?e.address(this.#r):null}close(){this.#r&&e.unregister(this.#r),this.#r=null,this.#e=null}}exports.Callback=b;
//# sourceMappingURL=helper.js.map
