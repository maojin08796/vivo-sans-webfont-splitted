{"version":3,"file":"binary.mjs","sources":["../../../../../../../../../../../../node_modules/.pnpm/@xan105+is@2.10.1/node_modules/@xan105/is/lib/is/file/binary.js"],"sourcesContent":["/*\nCopyright (c) Anthony Beaumont\nThis source code is licensed under the MIT License\nfound in the LICENSE file in the root directory of this source tree.\n*/\n\nimport { Buffer } from \"node:buffer\";\nimport { find } from \"../../util/header-magic.js\";\n\nconst WIN32 = { //cf: https://docs.microsoft.com/en-us/windows/win32/debug/pe-format \n  header: Buffer.from('50450000','hex'), // \"P\" and \"E\" followed by two null bytes\n  x86: Buffer.from('4C01','hex'), //x86\n  x86_64: Buffer.from('6486','hex'), //x86_64 (AMD64)\n  aarch32: Buffer.from('c001','hex'), //ARM (up to ARMv7/Aarch32) \n  aarch64: Buffer.from('64aa','hex') //ARMv8/Aarch64\n /* There are a lot more possible values\n    Example:\n    Buffer.from('6450','hex') -> RISC-V 64-bit address space \n    cf: https://docs.microsoft.com/en-us/windows/win32/debug/pe-format#machine-types\n  */\n};\n\nconst LINUX = { //cf: https://en.wikipedia.org/wiki/Executable_and_Linkable_Format#File_header\n  header: Buffer.from('7F454C46','hex'), // 0x7F followed by \"ELF\" in ASCII\n  \"32bit\" : Buffer.from('01','hex'), //32-bit executable\n  \"64bit\" : Buffer.from('02','hex') //64-bit executable\n  /*x86: Buffer.from('03','hex'), //x86\n  x86_64: Buffer.from('3E','hex'), //x86_64 (AMD64)\n  aarch32: Buffer.from('28','hex'), //ARM (up to ARMv7/Aarch32) \n  aarch64: Buffer.from('B7','hex') //ARMv8/Aarch64*/\n};\n\nasync function is64bit(filePath){\n  const is = await find(filePath, [\n    Buffer.concat([WIN32.header, WIN32.x86_64]),\n    Buffer.concat([WIN32.header, WIN32.aarch64]),\n    Buffer.concat([LINUX.header, LINUX[\"64bit\"]])\n  ]);\n  return is;\n}\n\nasync function is32bit(filePath){\n  const is = await find(filePath, [\n    Buffer.concat([WIN32.header, WIN32.x86]),\n    Buffer.concat([WIN32.header, WIN32.aarch32]),\n    Buffer.concat([LINUX.header, LINUX[\"32bit\"]])\n  ]);\n  return is;\n}\n\nexport { is64bit, is32bit }"],"names":["Buffer"],"mappings":";AAUUA,EAAO,KAAK,YAAW,KAAK,GAC/BA,EAAO,KAAK,QAAO,KAAK,GACrBA,EAAO,KAAK,QAAO,KAAK,GACvBA,EAAO,KAAK,QAAO,KAAK,GACxBA,EAAO,KAAK,QAAO,KAAK;AASzBA,EAAO,KAAK,YAAW,KAAK,GAC1BA,EAAO,KAAK,MAAK,KAAK,GACtBA,EAAO,KAAK,MAAK,KAAK;","x_google_ignoreList":[0]}