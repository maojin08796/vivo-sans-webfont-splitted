{"version":3,"file":"failure.js","sources":["../../../../../../../../../../node_modules/.pnpm/@xan105+error@1.7.1/node_modules/@xan105/error/lib/failure.js"],"sourcesContent":["/*\nCopyright (c) Anthony Beaumont\nThis source code is licensed under the MIT License\nfound in the LICENSE file in the root directory of this source tree.\n*/\n\nimport { filterStackTrace } from \"./util/clean.js\";\nimport { CODES } from \"./codes/custom.js\";\n\nclass Failure extends Error {\n  constructor(message, option = {}){\n    \n    if (typeof option === \"string\" || Number.isSafeInteger(option))\n      option = { code: option };\n    \n    const options = {\n      code: option.code ?? null,\n      cause: option.cause || null,\n      clean: option.clean ?? true,\n      filter: Array.isArray(option.filter) && option.filter.every(el => typeof el === \"string\" && el.length > 0) ? option.filter : [],\n      info: typeof option.info === \"object\" || typeof option.info === \"string\" ? option.info : null //object as in object,array,etc... Or just a string\n    };\n\n    if (options.cause instanceof Error) {\n      super(message || \"An error has occurred\", { cause: options.cause });\n    } else {\n      super(message || \"An error has occurred\");\n    }\n\n    // Err code\n    if (typeof options.code === \"string\" && options.code.length > 0) \n      this.code = options.code;\n    else if(Number.isSafeInteger(options.code))\n      this.code = CODES[options.code] ?? `Error ${options.code}`;\n    \n    // Label\n    this.name = this.constructor.name;\n    if (this.code) this.name += \" [\" + this.code + \"]\";\n    \n    // Additional info\n    if (options.info) this.info = options.info;\n    \n    // Stack trace\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n      if (options.clean)\n        this.stack = filterStackTrace(this.stack, options.filter);\n    }\n  }\n}\n\nexport { Failure };"],"names":["Failure","message","option","options","el","CODES","filterStackTrace"],"mappings":"kJASA,MAAMA,UAAgB,KAAM,CAC1B,YAAYC,EAASC,EAAS,GAAG,EAE3B,OAAOA,GAAW,UAAY,OAAO,cAAcA,CAAM,KAC3DA,EAAS,CAAE,KAAMA,CAAM,GAEzB,MAAMC,EAAU,CACd,KAAMD,EAAO,MAAQ,KACrB,MAAOA,EAAO,OAAS,KACvB,MAAOA,EAAO,OAAS,GACvB,OAAQ,MAAM,QAAQA,EAAO,MAAM,GAAKA,EAAO,OAAO,MAAME,GAAM,OAAOA,GAAO,UAAYA,EAAG,OAAS,CAAC,EAAIF,EAAO,OAAS,CAAA,EAC7H,KAAM,OAAOA,EAAO,MAAS,UAAY,OAAOA,EAAO,MAAS,SAAWA,EAAO,KAAO,IAC/F,EAEQC,EAAQ,iBAAiB,MAC3B,MAAMF,GAAW,wBAAyB,CAAE,MAAOE,EAAQ,MAAO,EAElE,MAAMF,GAAW,uBAAuB,EAItC,OAAOE,EAAQ,MAAS,UAAYA,EAAQ,KAAK,OAAS,EAC5D,KAAK,KAAOA,EAAQ,KACd,OAAO,cAAcA,EAAQ,IAAI,IACvC,KAAK,KAAOE,EAAAA,MAAMF,EAAQ,IAAI,GAAK,SAASA,EAAQ,IAAI,IAG1D,KAAK,KAAO,KAAK,YAAY,KACzB,KAAK,OAAM,KAAK,MAAQ,KAAO,KAAK,KAAO,KAG3CA,EAAQ,OAAM,KAAK,KAAOA,EAAQ,MAGlC,MAAM,oBACR,MAAM,kBAAkB,KAAM,KAAK,WAAW,EAC1CA,EAAQ,QACV,KAAK,MAAQG,EAAAA,iBAAiB,KAAK,MAAOH,EAAQ,MAAM,GAE9D,CACF","x_google_ignoreList":[0]}