{"version":3,"file":"attempt.js","sources":["../../../../../../../../../../node_modules/.pnpm/@xan105+error@1.7.1/node_modules/@xan105/error/lib/attempt.js"],"sourcesContent":["/*\nCopyright (c) Anthony Beaumont\nThis source code is licensed under the MIT License\nfound in the LICENSE file in the root directory of this source tree.\n*/\n\nfunction attempt(fn, args){\n if (!Array.isArray(args)) args = [];\n\n try{\n    //Can only determine if a function returns a Promise after exec. it\n    const handle = typeof fn === \"function\" ? fn(...args) : fn;\n    if (Object.prototype.toString.call(handle) === \"[object Promise]\" && typeof handle.then === \"function\")\n    {\n     //Attach handlers fast enough to avoid rejection was handled asynchronously\n     return new Promise((resolve) => {\n       handle\n       .then((result) => { \n         return resolve([result, undefined]);\n       })\n       .catch((err) => { \n         return resolve([undefined, err]); \n       })\n     });\n    } \n    else { \n      const result = handle;\n      return [result, undefined];\n    }\n  }catch(err){\n    return [undefined, err]\n  }\n}\n//NB: return undefined because destructure default assignement triggers only with undefined\n//eg: const [ foo = \"bar\", value ] = source;\n\n//\"node:util promisify\" style syntax: attemptify(foo)(bar) instead of attempt(foo, [bar]);\nfunction attemptify(fn){\n  return function(...args){\n    return attempt(fn, args);\n  }\n}\n\nexport { attempt, attemptify };"],"names":["attempt","fn","args","handle","resolve","result","err","attemptify"],"mappings":"gFAMA,SAASA,EAAQC,EAAIC,EAAK,CACpB,MAAM,QAAQA,CAAI,IAAGA,EAAO,CAAA,GAEjC,GAAG,CAEA,MAAMC,EAAS,OAAOF,GAAO,WAAaA,EAAG,GAAGC,CAAI,EAAID,EACxD,OAAI,OAAO,UAAU,SAAS,KAAKE,CAAM,IAAM,oBAAsB,OAAOA,EAAO,MAAS,WAGpF,IAAI,QAASC,GAAY,CAC9BD,EACC,KAAME,GACED,EAAQ,CAACC,EAAQ,MAAS,CAAC,CACnC,EACA,MAAOC,GACCF,EAAQ,CAAC,OAAWE,CAAG,CAAC,CAChC,CACH,CAAC,EAIO,CADQH,EACC,MAAS,CAE7B,OAAOG,EAAI,CACT,MAAO,CAAC,OAAWA,CAAG,CACxB,CACF,CAKA,SAASC,EAAWN,EAAG,CACrB,OAAO,YAAYC,EAAK,CACtB,OAAOF,EAAQC,EAAIC,CAAI,CACzB,CACF","x_google_ignoreList":[0]}