{"version":3,"file":"failure.mjs","sources":["../../../../../../../../../../node_modules/.pnpm/@xan105+error@1.7.1/node_modules/@xan105/error/lib/failure.js"],"sourcesContent":["/*\nCopyright (c) Anthony Beaumont\nThis source code is licensed under the MIT License\nfound in the LICENSE file in the root directory of this source tree.\n*/\n\nimport { filterStackTrace } from \"./util/clean.js\";\nimport { CODES } from \"./codes/custom.js\";\n\nclass Failure extends Error {\n  constructor(message, option = {}){\n    \n    if (typeof option === \"string\" || Number.isSafeInteger(option))\n      option = { code: option };\n    \n    const options = {\n      code: option.code ?? null,\n      cause: option.cause || null,\n      clean: option.clean ?? true,\n      filter: Array.isArray(option.filter) && option.filter.every(el => typeof el === \"string\" && el.length > 0) ? option.filter : [],\n      info: typeof option.info === \"object\" || typeof option.info === \"string\" ? option.info : null //object as in object,array,etc... Or just a string\n    };\n\n    if (options.cause instanceof Error) {\n      super(message || \"An error has occurred\", { cause: options.cause });\n    } else {\n      super(message || \"An error has occurred\");\n    }\n\n    // Err code\n    if (typeof options.code === \"string\" && options.code.length > 0) \n      this.code = options.code;\n    else if(Number.isSafeInteger(options.code))\n      this.code = CODES[options.code] ?? `Error ${options.code}`;\n    \n    // Label\n    this.name = this.constructor.name;\n    if (this.code) this.name += \" [\" + this.code + \"]\";\n    \n    // Additional info\n    if (options.info) this.info = options.info;\n    \n    // Stack trace\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n      if (options.clean)\n        this.stack = filterStackTrace(this.stack, options.filter);\n    }\n  }\n}\n\nexport { Failure };"],"names":["Failure","message","option","options","el","CODES","filterStackTrace"],"mappings":";;AASA,MAAMA,UAAgB,MAAM;AAAA,EAC1B,YAAYC,GAASC,IAAS,IAAG;AAE/B,KAAI,OAAOA,KAAW,YAAY,OAAO,cAAcA,CAAM,OAC3DA,IAAS,EAAE,MAAMA,EAAM;AAEzB,UAAMC,IAAU;AAAA,MACd,MAAMD,EAAO,QAAQ;AAAA,MACrB,OAAOA,EAAO,SAAS;AAAA,MACvB,OAAOA,EAAO,SAAS;AAAA,MACvB,QAAQ,MAAM,QAAQA,EAAO,MAAM,KAAKA,EAAO,OAAO,MAAM,CAAAE,MAAM,OAAOA,KAAO,YAAYA,EAAG,SAAS,CAAC,IAAIF,EAAO,SAAS,CAAA;AAAA,MAC7H,MAAM,OAAOA,EAAO,QAAS,YAAY,OAAOA,EAAO,QAAS,WAAWA,EAAO,OAAO;AAAA;AAAA,IAC/F;AAEI,IAAIC,EAAQ,iBAAiB,QAC3B,MAAMF,KAAW,yBAAyB,EAAE,OAAOE,EAAQ,OAAO,IAElE,MAAMF,KAAW,uBAAuB,GAItC,OAAOE,EAAQ,QAAS,YAAYA,EAAQ,KAAK,SAAS,IAC5D,KAAK,OAAOA,EAAQ,OACd,OAAO,cAAcA,EAAQ,IAAI,MACvC,KAAK,OAAOE,EAAMF,EAAQ,IAAI,KAAK,SAASA,EAAQ,IAAI,KAG1D,KAAK,OAAO,KAAK,YAAY,MACzB,KAAK,SAAM,KAAK,QAAQ,OAAO,KAAK,OAAO,MAG3CA,EAAQ,SAAM,KAAK,OAAOA,EAAQ,OAGlC,MAAM,sBACR,MAAM,kBAAkB,MAAM,KAAK,WAAW,GAC1CA,EAAQ,UACV,KAAK,QAAQG,EAAiB,KAAK,OAAOH,EAAQ,MAAM;AAAA,EAE9D;AACF;","x_google_ignoreList":[0]}